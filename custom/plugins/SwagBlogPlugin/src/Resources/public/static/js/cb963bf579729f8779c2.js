"use strict";(window["webpackJsonpPluginswag-blog-plugin"]=window["webpackJsonpPluginswag-blog-plugin"]||[]).push([[733],{733:function(t,e,i){i.r(e),i.d(e,{default:function(){return r}});let{Mixin:o,Context:a,Data:{Criteria:s}}=Shopware;var r={template:'{% block swag_blog_create %}\n<swag-blog-detail v-bind="$attrs" v-on="$listeners" />\n{% endblock %}\n',inject:["repositoryFactory","acl"],mixins:[o.getByName("notification")],data(){return{blog:{title:"",description:"",categoryId:null,mainImageId:null,mainImage:null,errors:{},publishedAt:null},categories:[],isLoading:!1}},computed:{blogRepository(){return this.repositoryFactory.create("swag_blog")},categoryRepository(){return this.repositoryFactory.create("swag_blog_category")},categoryOptions(){return this.categories.map(t=>({value:t.id,label:t.name}))}},created(){this.loadCategories(),this.loadEntity()},methods:{loadCategories(){let t=new s(1,100);t.addSorting(s.sort("name","ASC")),this.categoryRepository.search(t,a.api).then(t=>{this.categories=t})},loadEntity(){this.blog=this.blogRepository.create(a.api)},onSave(){if(!this.blog.title||""===this.blog.title.trim()){this.blog.errors.title="Title must not be empty",this.createNotificationError({message:"Please fill the Title field."});return}this.isLoading=!0,this.blogRepository.save(this.blog,a.api).then(()=>{this.createNotificationSuccess({message:"Blog created successfully."}),this.$router.push({name:"swag.blog.detail",params:{id:this.blog.id}})}).catch(()=>{this.createNotificationError({message:"Failed to create blog."})}).finally(()=>{this.isLoading=!1})}}}}}]);