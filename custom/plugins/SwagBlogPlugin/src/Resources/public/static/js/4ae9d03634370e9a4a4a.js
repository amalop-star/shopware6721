(window["webpackJsonpPluginswag-blog-plugin"]=window["webpackJsonpPluginswag-blog-plugin"]||[]).push([[783],{676:function(){},783:function(e,a,n){"use strict";n(325);let{Component:i,Mixin:t}=Shopware;i.register("swag-blog-media",{template:'{% block swag_blog_media_form %}\n<div class="sw-blog-media-form" :class="{ \'is--disabled\': disabled }">\n\n    {# Main Image Upload #}\n    <sw-card :title="$tc(\'swag-blog.detail.cardMainImage\')">\n        <sw-media-upload-v2\n            variant="regular"\n            :upload-tag="blog.id + \'-main\'"\n            :default-folder="\'blog\'"\n            :file-accept="fileAccept"\n            :allow-multiple="false"\n            :media-id="blog.mainImageId"\n            @media-upload-finish="onMainImageUploadFinish"\n        />\n        <sw-media-preview-v2\n            v-if="blog.mainImage"\n            :source="blog.mainImage.id"\n            class="sw-blog-media-form__preview-main"\n        />\n    </sw-card>\n\n    {# Gallery Upload #}\n    <sw-card :title="$tc(\'swag-blog.detail.cardGallery\')">\n        <sw-upload-listener\n            :upload-tag="blog.id + \'-gallery\'"\n            auto-upload\n            @media-upload-finish="onGalleryUploadFinish"\n        />\n        <div class="sw-blog-media-form__gallery">\n            <sw-media-preview-v2\n                v-for="media in blog.gallery"\n                :key="media.id"\n                :source="media.mediaId"\n                class="sw-blog-media-form__preview-item"\n                @click.native="removeGalleryMedia(media)"\n            />\n        </div>\n    </sw-card>\n\n</div>\n{% endblock %}\n',inject:["repositoryFactory"],mixins:[t.getByName("notification")],props:{disabled:{type:Boolean,default:!1},fileAccept:{type:String,default:"*/*"}},data(){return{blog:null}},computed:{mainImageRepository(){return this.repositoryFactory.create("media")},galleryRepository(){return this.repositoryFactory.create("swag_blog_media")}},methods:{onMainImageUploadFinish({targetId:e}){this.blog.mainImageId=e,this.mainImageRepository.get(e).then(e=>{this.blog.mainImage=e})},onGalleryUploadFinish({targetId:e}){let a=this.galleryRepository.create();a.blogId=this.blog.id,a.mediaId=e,this.blog.gallery.add(a)},removeGalleryMedia(e){confirm("Remove this media?")&&this.blog.gallery.remove(e.id)}}})},325:function(e,a,n){var i=n(676);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),(0,n(534).A)("25805109",i,!0,{})},534:function(e,a,n){"use strict";function i(e,a){for(var n=[],i={},t=0;t<a.length;t++){var r=a[t],o=r[0],l={id:e+":"+t,css:r[1],media:r[2],sourceMap:r[3]};i[o]?i[o].parts.push(l):n.push(i[o]={id:o,parts:[l]})}return n}n.d(a,{A:function(){return f}});var t,r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},l=r&&(document.head||document.getElementsByTagName("head")[0]),s=null,d=0,c=!1,p=function(){},u=null,g="data-vue-ssr-id",m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(e,a,n,t){c=n,u=t||{};var r=i(e,a);return h(r),function(a){for(var n=[],t=0;t<r.length;t++){var l=o[r[t].id];l.refs--,n.push(l)}a?h(r=i(e,a)):r=[];for(var t=0;t<n.length;t++){var l=n[t];if(0===l.refs){for(var s=0;s<l.parts.length;s++)l.parts[s]();delete o[l.id]}}}}function h(e){for(var a=0;a<e.length;a++){var n=e[a],i=o[n.id];if(i){i.refs++;for(var t=0;t<i.parts.length;t++)i.parts[t](n.parts[t]);for(;t<n.parts.length;t++)i.parts.push(b(n.parts[t]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{for(var r=[],t=0;t<n.parts.length;t++)r.push(b(n.parts[t]));o[n.id]={id:n.id,refs:1,parts:r}}}}function v(){var e=document.createElement("style");return e.type="text/css",l.appendChild(e),e}function b(e){var a,n,i=document.querySelector("style["+g+'~="'+e.id+'"]');if(i){if(c)return p;i.parentNode.removeChild(i)}if(m){var t=d++;a=w.bind(null,i=s||(s=v()),t,!1),n=w.bind(null,i,t,!0)}else a=I.bind(null,i=v()),n=function(){i.parentNode.removeChild(i)};return a(e),function(i){i?(i.css!==e.css||i.media!==e.media||i.sourceMap!==e.sourceMap)&&a(e=i):n()}}var y=(t=[],function(e,a){return t[e]=a,t.filter(Boolean).join("\n")});function w(e,a,n,i){var t=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=y(a,t);else{var r=document.createTextNode(t),o=e.childNodes;o[a]&&e.removeChild(o[a]),o.length?e.insertBefore(r,o[a]):e.appendChild(r)}}function I(e,a){var n=a.css,i=a.media,t=a.sourceMap;if(i&&e.setAttribute("media",i),u.ssrId&&e.setAttribute(g,a.id),t&&(n+="\n/*# sourceURL="+t.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}}]);